{"version":3,"file":"forum.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEAA,wEAAA,CAAqB,2BAArB,EAAkD,YAAM;AAEtDE,EAAAA,4DAAM,CAACD,yFAAD,EAA2B,UAA3B,EAAuC,YAAY;AAAA;;AACvD,QAAID,uEAAA,CAAoBG,0EAApB,CAAJ,EAAoC;AAElC,UAAMM,OAAO,GAAGT,uEAAA,CAAoB,+CAApB,KAAwE,GAAxF;AAEAA,MAAAA,kEAAA,CACQ,OADR,EACiB;AACbc,QAAAA,OAAO,EAAE;AADI,OADjB,EAIGC,IAJH,CAIQ,UAACC,OAAD,EAAa;AAEjB,aAAI,CAACC,UAAL,GAAkBD,OAAO,CAACE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBJ,OAAO,CAACK,MAAnC,CAAD,CAAzB;AAEA,YAAMC,eAAe,GAAGC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,CAAxB;AACAF,QAAAA,eAAe,CAACG,SAAhB,GAA4B,KAAI,CAACR,UAAL,CAAgBS,IAAhB,CAAqBC,UAArB,CAAgCC,WAAhC,CAA4CC,OAA5C,CAAoD,iBAApD,EAAuE,EAAvE,EAA2EC,MAA3E,CAAkF,CAAlF,EAAqFrB,OAArF,CAA5B;AAEA,YAAMsB,YAAY,GAAGR,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAArB;AACA,YAAMQ,IAAI,GAAGhC,kEAAA,CAAe,KAAI,CAACiB,UAAL,CAAgBiB,IAAhB,EAAf,CAAb;;AACA,YAAMA,IAAI,GAAG,KAAI,CAACjB,UAAL,CAAgBiB,IAAhB,GAAuBC,WAAvB,EAAb;;AACA,YAAMC,UAAU,GAAG,KAAI,CAACnB,UAAL,CAAgBmB,UAAhB,GAA6BV,IAA7B,CAAkCC,UAAlC,CAA6CU,KAAhE;;AACA,YAAMC,cAAc,GAAGtC,wEAAA,CAAqB,KAAI,CAACiB,UAAL,CAAgBmB,UAAhB,EAArB,CAAvB;AACAL,QAAAA,YAAY,CAACN,SAAb,gBAAoCO,IAApC,SAA4CE,IAA5C,4BAAuEI,cAAvE,SAAyFF,UAAzF;AACD,OAjBH;AAmBAG,MAAAA,MAAM,CAACC,gBAAP,CAAwB,kBAAxB,EAA4C,UAACC,KAAD,EAAW;AACrD,YAAMC,QAAQ,GAAGnB,QAAQ,CAACoB,gBAAT,CAA0B,qBAA1B,CAAjB;AACA,YAAMC,OAAO,GAAGF,QAAQ,CAACG,IAAT,CAAc,CAAd,CAAhB,CAFqD,CAEnB;;AAClCC,QAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AAEA,YAAMI,KAAK,GAAGzB,QAAQ,CAAC0B,aAAT,CAAuB,KAAvB,CAAd;AACAD,QAAAA,KAAK,CAACvB,SAAN,GACE,kEACA,kEADA,GAEA,0CAFA,GAGA,uEAHA,GAIA,kBAJA,GAKA,cALA,GAMA,QAPF;AAQAmB,QAAAA,OAAO,CAACM,WAAR,CAAoBF,KAApB;AACD,OAfD;AAgBD;AACF,GAzCK,CAAN;AA0CD,CA5CD;;;;;;;;;;;ACLA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D","sources":["webpack://@justoverclock/random-post/./src/forum/index.js","webpack://@justoverclock/random-post/external root \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/app']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@justoverclock/random-post/webpack/bootstrap","webpack://@justoverclock/random-post/webpack/runtime/compat get default export","webpack://@justoverclock/random-post/webpack/runtime/define property getters","webpack://@justoverclock/random-post/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/random-post/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport {extend} from 'flarum/common/extend';\nimport IndexPage from \"flarum/forum/components/IndexPage\";\n\napp.initializers.add('justoverclock/random-post', () => {\n\n  extend(DiscussionList.prototype, 'oncreate', function () {\n    if (app.current.matches(IndexPage)) {\n\n      const charLim = app.forum.attribute('justoverclock-random-post.charLimitRandomPost') || 280;\n\n      app.store\n        .find('posts', {\n          include: 'discussion,user',\n        })\n        .then((results) => {\n\n          this.randomPost = results[Math.floor(Math.random() * results.length)];\n\n          const randomPostTitle = document.getElementById('random-post-text');\n          randomPostTitle.innerHTML = this.randomPost.data.attributes.contentHtml.replace(/<\\/?[^>]+(>|$)/g, '').substr(0, charLim);\n\n          const randomAuthor = document.getElementById('random-post-author');\n          const link = app.route.user(this.randomPost.user());\n          const user = this.randomPost.user().displayName();\n          const discussion = this.randomPost.discussion().data.attributes.title;\n          const discussionLink = app.route.discussion(this.randomPost.discussion());\n          randomAuthor.innerHTML = `<a href=${link}>${user}</a> in the <a href=${discussionLink}>${discussion}</a> `;\n        });\n\n      window.addEventListener('DOMContentLoaded', (event) => {\n        const elements = document.querySelectorAll('.DiscussionListItem');\n        const firstEl = elements.item(0); //\n        console.log(firstEl);\n\n        const newEl = document.createElement('div');\n        newEl.innerHTML =\n          '<div id=\"random-post-one\"><div class=\"random-post-content\">\\n' +\n          '        <p class=\"random-post-text\" id=\"random-post-text\"></p>\\n' +\n          '        <div class=\"random-post-info\">\\n' +\n          '           <div class=\"random-post-author\" id=\"random-post-author\">\\n' +\n          '        </div>\\n' +\n          '      </div>' +\n          '</div>';\n        firstEl.appendChild(newEl);\n      });\n    }\n  });\n});\n\n\n\n","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","DiscussionList","extend","IndexPage","initializers","add","prototype","current","matches","charLim","forum","attribute","store","find","include","then","results","randomPost","Math","floor","random","length","randomPostTitle","document","getElementById","innerHTML","data","attributes","contentHtml","replace","substr","randomAuthor","link","route","user","displayName","discussion","title","discussionLink","window","addEventListener","event","elements","querySelectorAll","firstEl","item","console","log","newEl","createElement","appendChild"],"sourceRoot":""}