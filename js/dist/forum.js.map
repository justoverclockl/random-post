{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@justoverclock/random-post/./src/forum/index.js","webpack://@justoverclock/random-post/external root \"flarum.core.compat['common/extend']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/app']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@justoverclock/random-post/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@justoverclock/random-post/webpack/bootstrap","webpack://@justoverclock/random-post/webpack/runtime/compat get default export","webpack://@justoverclock/random-post/webpack/runtime/define property getters","webpack://@justoverclock/random-post/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/random-post/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport {extend} from 'flarum/common/extend';\nimport DiscussionListItem from \"flarum/forum/components/DiscussionListItem\";\n\n\napp.initializers.add('justoverclock/random-post', () => {\n  extend(DiscussionList.prototype, 'oninit', function (){\n    app.store\n      .find('posts', {\n        include: 'discussion,user',\n      })\n      .then((results) => {\n        this.randomPostOne = results[Math.floor(Math.random() * results.length)];\n        this.randomPostTwo = results[Math.floor(Math.random() * results.length)];\n        console.log(this.randomPostOne)\n        console.log(this.randomPostTwo)\n\n      })\n  })\n  extend(DiscussionList.prototype, 'view', function (vdom) {\n\n\n\n    vdom.children.forEach(vdom => {\n\n      // Find the child with class .DiscussionList-discussions\n      if (!vdom || !vdom.attrs || vdom.attrs.className !== 'DiscussionList-discussions') {\n        return;\n      }\n\n      let discussionIndex = 0;\n\n      vdom.children.forEach(mapGroup => {\n\n\n        // All children should be Mithril virtual group nodes \"[\" but we'll make sure no `null` or `undefined` got in here\n        if (!mapGroup || !mapGroup.children) {\n          return;\n        }\n\n        // Clone array so inserting new items into the original array doesn't cause the loop to skip items\n        [...mapGroup.children].forEach((li) => {\n          // Verify each child is an li containing a DiscussionListItem, this way we are not counting items added by other extensions\n          if (li.tag !== 'li' || !li.children || !li.children.length || !li.children[0] || li.children[0].tag !== DiscussionListItem) {\n            return;\n          }\n\n          // Add index to the DOM so it can be used from CSS\n          li.attrs['data-index'] = discussionIndex;\n\n          // Add content above each group of 3 discussions\n          if (discussionIndex === 1) {\n              // Use indexOf() to get the up to date index of the current element, since adding items will shift the index of next items\n              mapGroup.children.splice(mapGroup.children.indexOf(li), 0,\n                <div>{this.randomPostOne && this.randomPostOne.data.attributes.contentHtml.replace(/<\\/?[^>]+(>|$)/g, '').substr(0, 200)}</div>);\n          } else if (discussionIndex === 10){\n            mapGroup.children.splice(mapGroup.children.indexOf(li), 0,\n              <div>{this.randomPostOne && this.randomPostOne.data.attributes.contentHtml.replace(/<\\/?[^>]+(>|$)/g, '').substr(0, 200)}</div>);\n          } else if (discussionIndex === 19) {\n            mapGroup.children.splice(mapGroup.children.indexOf(li), 0,\n              <div>{this.randomPostOne && this.randomPostOne.data.attributes.contentHtml.replace(/<\\/?[^>]+(>|$)/g, '').substr(0, 200)}</div>);\n          }\n\n          discussionIndex++;\n        });\n      });\n    });\n  });\n});\n\n\n\n","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","DiscussionList","extend","DiscussionListItem","initializers","add","prototype","store","find","include","then","results","randomPostOne","Math","floor","random","length","randomPostTwo","console","log","vdom","children","forEach","attrs","className","discussionIndex","mapGroup","li","tag","splice","indexOf","data","attributes","contentHtml","replace","substr"],"sourceRoot":""}