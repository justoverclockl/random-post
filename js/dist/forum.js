(()=>{var o={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return o.d(a,{a}),a},d:(t,a)=>{for(var r in a)o.o(a,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}},t={};(()=>{"use strict";o.r(t);const a=flarum.core.compat["forum/app"];var r=o.n(a);const s=flarum.core.compat["forum/components/DiscussionList"];var e=o.n(s);const n=flarum.core.compat["common/extend"],d=flarum.core.compat["forum/components/DiscussionListItem"];var i=o.n(d);const c=flarum.core.compat["forum/components/IndexPage"];var u=o.n(c);r().initializers.add("justoverclock/random-post",(function(){(0,n.extend)(e().prototype,"oninit",(function(){var o=this;r().store.find("posts",{include:"discussion,user"}).then((function(t){o.randomPostOne=t[Math.floor(Math.random()*t.length)],o.randomPostTwo=t[Math.floor(Math.random()*t.length)],o.randomPostTree=t[Math.floor(Math.random()*t.length)]}))})),(0,n.extend)(e().prototype,"view",(function(o){var t=this,a=r().forum.attribute("justoverclock-random-post.charLimitRandomPost")||200;r().current.matches(u())&&m.redraw(),o.children.forEach((function(o){if(o&&o.attrs&&"DiscussionList-discussions"===o.attrs.className){var s=0;o.children.forEach((function(o){o&&o.children&&[].concat(o.children).forEach((function(e){"li"===e.tag&&e.children&&e.children.length&&e.children[0]&&e.children[0].tag===i()&&(e.attrs["data-index"]=s,1===s?o.children.splice(o.children.indexOf(e),0,m("div",{id:"random-post-one"},m("div",{className:"random-post-content"},m("p",{className:"random-post-text",id:"random-post-text"},t.randomPostOne&&t.randomPostOne.data.attributes.contentHtml.replace(/<\/?[^>]+(>|$)/g,"").substr(0,a)),m("div",{className:"random-post-info"},m("div",{className:"random-post-author",id:"random-post-author"},m("a",{href:t.randomPostOne&&"u/"+t.randomPostOne.user().data.attributes.slug},t.randomPostOne&&t.randomPostOne.user().displayName()),r().translator.trans("justoverclock-random-post.forum.inThe"),m("a",{href:t.randomPostOne&&"d/"+t.randomPostOne.discussion().data.attributes.slug},t.randomPostOne&&t.randomPostOne.discussion().data.attributes.title)))))):10===s?o.children.splice(o.children.indexOf(e),0,m("div",{id:"random-post-one"},m("div",{className:"random-post-content"},m("p",{className:"random-post-text",id:"random-post-text"},t.randomPostTwo&&t.randomPostTwo.data.attributes.contentHtml.replace(/<\/?[^>]+(>|$)/g,"").substr(0,a)),m("div",{className:"random-post-info"},m("div",{className:"random-post-author",id:"random-post-author"},m("a",{href:t.randomPostTwo&&"u/"+t.randomPostTwo.user().data.attributes.slug},t.randomPostTwo&&t.randomPostTwo.user().displayName()),r().translator.trans("justoverclock-random-post.forum.inThe"),m("a",{href:t.randomPostTwo&&"d/"+t.randomPostTwo.discussion().data.attributes.slug},t.randomPostTwo&&t.randomPostTwo.discussion().data.attributes.title)))))):19===s&&o.children.splice(o.children.indexOf(e),0,m("div",{id:"random-post-one"},m("div",{className:"random-post-content"},m("p",{className:"random-post-text",id:"random-post-text"},t.randomPostTree&&t.randomPostTree.data.attributes.contentHtml.replace(/<\/?[^>]+(>|$)/g,"").substr(0,a)),m("div",{className:"random-post-info"},m("div",{className:"random-post-author",id:"random-post-author"},m("a",{href:t.randomPostTree&&"u/"+t.randomPostTree.user().data.attributes.slug},t.randomPostTree&&t.randomPostTree.user().displayName()),r().translator.trans("justoverclock-random-post.forum.inThe"),m("a",{href:t.randomPostTree&&"d/"+t.randomPostTree.discussion().data.attributes.slug},t.randomPostTree&&t.randomPostTree.discussion().data.attributes.title)))))),s++)}))}))}}))}))}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map